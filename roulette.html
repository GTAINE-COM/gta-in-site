<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–†—É–ª–µ—Ç–∫–∞ ‚Äî GTAINE</title>
  <meta name="description" content="–Ü–≥—Ä–æ–≤–∞ —Ä—É–ª–µ—Ç–∫–∞ GTAINE" />
  <link rel="stylesheet" href="assets/style.css" />
  <link rel="icon" type="image/svg+xml" href="assets/gtaine-logo.svg">
</head>

<body>
  <!-- TOPBAR -->
  <header class="topbar">
    <div class="container topbar__inner">
      <a class="brand" href="./">
        <img class="brand__badge" src="assets/logo.png" alt="GTAINE">
        <span class="brand__name">
          <span class="brand__title">GTAINE</span>
          <span class="brand__sub">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π RP-–ø—Ä–æ–µ–∫—Ç</span>
        </span>
      </a>

      <div class="navwrap">
        <nav class="nav">
          <a class="nav__link" href="./">–ì–æ–ª–æ–≤–Ω–∞</a>
          <a class="nav__link" href="./forum.html">–§–æ—Ä—É–º</a>
          <a class="nav__link" href="./wiki/">–í—ñ–∫—ñ</a>
          <a class="nav__link is-active" href="./roulette.html">–†—É–ª–µ—Ç–∫–∞</a>
          <a class="nav__link" href="./giveaway.html">–†–æ–∑—ñ–≥—Ä–∞—à</a>
          <a class="nav__link" href="./download.html">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</a>
        </nav>

        <a class="btn btn--ghost" href="./cabinet.html" id="cabBtn">–ö–∞–±—ñ–Ω–µ—Ç</a>
      </div>
    </div>
  </header>

  <!-- PAGE -->
  <main class="page">
    <div class="container">
      <section class="hero hero--tight">
        <div class="hero__card">
          <div class="hero__kicker">GTAINE ‚Ä¢ –ì–†–ê</div>
          <h1 class="hero__title">–Ü–≥—Ä–æ–≤–∞ —Ä—É–ª–µ—Ç–∫–∞</h1>
          <p class="hero__text">
            –í–∏–±–∏—Ä–∞–π —Å—Ç–∞–≤–∫—É, –∫—Ä—É—Ç–∏ ‚Äî —ñ –æ—Ç—Ä–∏–º—É–π –ø—Ä–∏–∑. –ü–æ–∫–∏ —â–æ —Ü–µ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∞ –≤–µ—Ä—Å—ñ—è (–ø—Ä–∞—Ü—é—î –≤ –±—Ä–∞—É–∑–µ—Ä—ñ).
          </p>

          <div class="grid2">
            <div class="card">
              <div class="card__title">–ë–∞–ª–∞–Ω—Å</div>
              <div class="balance">
                <div class="balance__num" id="balance">1000</div>
                <div class="balance__sub">GTAINE coins</div>
              </div>

              <div class="row">
                <label class="field">
                  <span class="field__label">–°—Ç–∞–≤–∫–∞</span>
                  <input class="field__input" id="bet" type="number" min="10" step="10" value="100">
                </label>

                <button class="btn btn--primary" id="spinBtn">–ö—Ä—É—Ç–∏—Ç–∏</button>
              </div>

              <div class="row row--small">
                <button class="btn btn--ghost" id="resetBtn">–°–∫–∏–Ω—É—Ç–∏ –±–∞–ª–∞–Ω—Å</button>
                <button class="btn btn--ghost" id="addBtn">+500</button>
              </div>
            </div>

            <div class="card">
              <div class="card__title">–ö–æ–ª–µ—Å–æ</div>

              <div class="wheel">
                <div class="wheel__ring" id="wheel">
                  <div class="wheel__center" id="wheelText">–ì–û–¢–û–í–ò–ô?</div>
                </div>
                <div class="wheel__pointer"></div>
              </div>

              <div class="result" id="result">–ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–ö—Ä—É—Ç–∏—Ç–∏‚Äù</div>

              <div class="prizes">
                <div class="prize"><span class="dot dot--win"></span> x2 (–ø–æ–¥–≤–æ—î–Ω–Ω—è —Å—Ç–∞–≤–∫–∏)</div>
                <div class="prize"><span class="dot dot--mid"></span> x1.5</div>
                <div class="prize"><span class="dot dot--mid"></span> +100</div>
                <div class="prize"><span class="dot dot--lose"></span> 0 (–ø—Ä–æ–≥—Ä–∞—à)</div>
              </div>
            </div>
          </div>

          <div class="note">
            ‚ö†Ô∏è –¶–µ –¥–µ–º–æ. –©–æ–± –∑—Ä–æ–±–∏—Ç–∏ ‚Äú—è–∫ –≤ –≥—Ä—ñ‚Äù –ø–æ-—Å–ø—Ä–∞–≤–∂–Ω—å–æ–º—É (—Å–µ—Ä–≤–µ—Ä–Ω–∞ —Ä—É–ª–µ—Ç–∫–∞), —Ç—Ä–µ–±–∞ –±–µ–∫–µ–Ω–¥ –∞–±–æ API –∑ –≤–∞—à–æ–≥–æ –ª–∞—É–Ω—á–µ—Ä–∞.
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    // --- –ö–∞–±—ñ–Ω–µ—Ç –∫–Ω–æ–ø–∫–∞ ---
    const cabBtn = document.getElementById('cabBtn');
    const user = JSON.parse(localStorage.getItem('gtaine_user') || 'null');
    if (user?.nick) cabBtn.textContent = user.nick;

    // --- –†—É–ª–µ—Ç–∫–∞ –ª–æ–≥—ñ–∫–∞ ---
    const STORAGE_KEY = 'gtaine_balance';
    const balanceEl = document.getElementById('balance');
    const betEl = document.getElementById('bet');
    const spinBtn = document.getElementById('spinBtn');
    const resetBtn = document.getElementById('resetBtn');
    const addBtn = document.getElementById('addBtn');
    const wheel = document.getElementById('wheel');
    const wheelText = document.getElementById('wheelText');
    const resultEl = document.getElementById('result');

    function getBalance(){
      const v = Number(localStorage.getItem(STORAGE_KEY));
      return Number.isFinite(v) && v > 0 ? v : 1000;
    }
    function setBalance(v){
      localStorage.setItem(STORAGE_KEY, String(v));
      balanceEl.textContent = v;
    }
    setBalance(getBalance());

    const outcomes = [
      { label: "x2", type:"mul", value: 2 },
      { label: "0",  type:"lose", value: 0 },
      { label: "+100", type:"add", value: 100 },
      { label: "x1.5", type:"mul", value: 1.5 },
      { label: "0",  type:"lose", value: 0 },
      { label: "+100", type:"add", value: 100 },
      { label: "x2", type:"mul", value: 2 },
      { label: "0",  type:"lose", value: 0 },
    ];

    let spinning = false;

    function randIndex(){
      return Math.floor(Math.random()*outcomes.length);
    }

    function applyOutcome(bet, out){
      if(out.type === "lose") return 0;
      if(out.type === "add") return bet + out.value;
      if(out.type === "mul") return Math.round(bet * out.value);
      return 0;
    }

    function showResult(text, good){
      resultEl.textContent = text;
      resultEl.classList.toggle('result--good', !!good);
      resultEl.classList.toggle('result--bad', !good);
    }

    spinBtn.addEventListener('click', () => {
      if(spinning) return;

      const bet = Math.max(10, Number(betEl.value || 0));
      let bal = getBalance();

      if(bet > bal){
        showResult("–ù–µ–º–∞—î –≥—Ä–æ—à–µ–π –Ω–∞ —Å—Ç–∞–≤–∫—É üòÖ", false);
        return;
      }

      spinning = true;
      spinBtn.disabled = true;

      const pick = randIndex();
      const out = outcomes[pick];

      // –ê–Ω—ñ–º–∞—Ü—ñ—è –∫–æ–ª–µ—Å–∞
      const turns = 6 + Math.random()*2;
      const degPer = 360 / outcomes.length;
      const targetDeg = 360*turns + (pick * degPer) + (degPer/2);

      wheel.style.setProperty('--spin', `${targetDeg}deg`);
      wheel.classList.add('wheel__ring--spin');
      wheelText.textContent = "–ö–†–£–¢–ò–¢–¨–°–Ø‚Ä¶";

      setTimeout(() => {
        // —Å–ø–∏—Å—É—î–º–æ —Å—Ç–∞–≤–∫—É
        bal -= bet;
        // –≤–∏–≥—Ä–∞—à
        const win = applyOutcome(bet, out);
        bal += win;

        setBalance(bal);

        wheel.classList.remove('wheel__ring--spin');
        wheelText.textContent = out.label;

        const good = win > 0;
        showResult(good ? `–í–∏–≥—Ä–∞—à: +${win} ‚úÖ` : `–ü—Ä–æ–≥—Ä–∞—à üò≠`, good);

        spinning = false;
        spinBtn.disabled = false;
      }, 1400);
    });

    resetBtn.addEventListener('click', () => setBalance(1000));
    addBtn.addEventListener('click', () => setBalance(getBalance()+500));
  </script>
</body>
</html>
